name: learn-github-actions
on: [push]
env:
  buildConfiguration: "Release"
  wwwrootDir: "Tailspin.SpaceGame.Web/wwwroot"
  dotnetSdkVersion: "5.x"
jobs:
  job:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        name: Setup node
      - name: Gulp Runner
        uses: 2KAbhishek/gulp-runner@v0.3
      - uses: actions/setup-dotnet@v1
        name: Setup dotnet
        with:
          dotnet-version: ${{ env.dotnetSdkVersion }}
      - run: npm install
      - run: "./node_modules/.bin/node-sass ${{env.wwwrootDir}} --output ${{env.wwwrootDir}}"
      - run: gulp
      - run: 'echo "${{env.GITHUB_WORKFLOW}}, ${{env.GITHUB_RUN_ID}}, ${{env.GITHUB_RUN_NUMBER}}" > buildinfo.txt'
        working-directory: { { env.wwwrootDir } }
      - run: dotnet build --configuration ${{env.buildConfiguration}}
        name: "Build the project - ${{buildConfiguration}"
